<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>grammar_graphics_slides.knit</title>
    <meta charset="utf-8" />
    <script src="grammar_graphics_slides_files/header-attrs/header-attrs.js"></script>
    <link href="grammar_graphics_slides_files/remark-css/default.css" rel="stylesheet" />
    <link href="grammar_graphics_slides_files/remark-css/default-fonts.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">




@media print {
  .has-continuation {
    display: block !important;
  }
}


class: title-slide

.bg-text[
# Data viz and the grammar of graphics
## Data Science for Biologists, Fall 2021
]

---

# Reminder: The "Types of Plots" App is here for you!!


+ Access from anywhere: https://sjspielman.shinyapps.io/types_of_plots

+ Access from your RStudio Cloud project:


```r
library(ds4b.materials) # Load the library if not already loaded
launch_app("types_of_plots") # Launch the app once library is loaded
```

---

# Grammar

The dog runs in a park.

--
&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;

The runs in park dog a.

Runs dog park in a the.

In park a the runs dog.

---
class: middle, center


&lt;img src="img/gg/ggplot-grammar-of-graphics-stack-1.png" width="600px" /&gt;

### Aesthetics --&gt; *aesthetic mappings*


---

# The dataset


```r
msleep_subvore
```

```
## # A tibble: 46 × 5
##    name                       vore  awake brainwt  bodywt
##    &lt;chr&gt;                      &lt;fct&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
##  1 Owl monkey                 omni    7   0.0155    0.48 
##  2 Greater short-tailed shrew omni    9.1 0.00029   0.019
##  3 Cow                        herbi  20   0.423   600    
##  4 Dog                        carni  13.9 0.07     14    
##  5 Roe deer                   herbi  21   0.0982   14.8  
##  6 Goat                       herbi  18.7 0.115    33.5  
##  7 Guinea pig                 herbi  14.6 0.0055    0.728
##  8 Chinchilla                 herbi  11.5 0.0064    0.42 
##  9 Star-nosed mole            omni   13.7 0.001     0.06 
## 10 African giant pouched rat  omni   15.7 0.0066    1    
## # … with 36 more rows
```

---

# The dataset


```r
summary(msleep_subvore)
```

```
##      name              vore        awake          brainwt        
##  Length:46          carni: 9   Min.   : 6.00   Min.   :0.000140  
##  Class :character   herbi:20   1st Qu.:11.50   1st Qu.:0.005125  
##  Mode  :character   omni :17   Median :14.25   Median :0.016500  
##                                Mean   :14.39   Mean   :0.339623  
##                                3rd Qu.:17.70   3rd Qu.:0.173500  
##                                Max.   :21.10   Max.   :5.712000  
##      bodywt        
##  Min.   :   0.005  
##  1st Qu.:   0.542  
##  Median :   2.788  
##  Mean   : 245.575  
##  3rd Qu.:  47.525  
##  Max.   :6654.000
```

---


```r
unique(msleep_subvore$name)
```

```
##  [1] "Owl monkey"                     "Greater short-tailed shrew"    
##  [3] "Cow"                            "Dog"                           
##  [5] "Roe deer"                       "Goat"                          
##  [7] "Guinea pig"                     "Chinchilla"                    
##  [9] "Star-nosed mole"                "African giant pouched rat"     
## [11] "Lesser short-tailed shrew"      "Long-nosed armadillo"          
## [13] "Tree hyrax"                     "North American Opossum"        
## [15] "Asian elephant"                 "Horse"                         
## [17] "Donkey"                         "European hedgehog"             
## [19] "Patas monkey"                   "Domestic cat"                  
## [21] "Galago"                         "Gray seal"                     
## [23] "Gray hyrax"                     "Human"                         
## [25] "African elephant"               "Macaque"                       
## [27] "Golden hamster"                 "House mouse"                   
## [29] "Slow loris"                     "Rabbit"                        
## [31] "Sheep"                          "Chimpanzee"                    
## [33] "Jaguar"                         "Baboon"                        
## [35] "Laboratory rat"                 "Squirrel monkey"               
## [37] "Cotton rat"                     "Arctic ground squirrel"        
## [39] "Thirteen-lined ground squirrel" "Pig"                           
## [41] "Brazilian tapir"                "Tenrec"                        
## [43] "Tree shrew"                     "Genet"                         
## [45] "Arctic fox"                     "Red fox"
```

---

# Identifying components of a plot

![](grammar_graphics_slides_files/figure-html/unnamed-chunk-6-1.png)&lt;!-- --&gt;

**Aesthetics**: How is the data *mapped onto* visual components of the plot?
+ X-axis?
+ Y-axis?
+ Colors? Shapes? Sizes?

**Geometries**: What *shapes* aka *geometric objects* are displayed in the plot? (Often AKA: What type of plot?)

---

![](grammar_graphics_slides_files/figure-html/unnamed-chunk-7-1.png)&lt;!-- --&gt;

---


![](grammar_graphics_slides_files/figure-html/unnamed-chunk-8-1.png)&lt;!-- --&gt;

---

![](grammar_graphics_slides_files/figure-html/unnamed-chunk-9-1.png)&lt;!-- --&gt;


---
![](grammar_graphics_slides_files/figure-html/unnamed-chunk-10-1.png)&lt;!-- --&gt;


```
##  [1]  6.0  6.6  7.0  7.4  8.4  9.1  9.7 10.2 11.0 11.5 11.5 11.5 11.5 12.7 13.0
## [16] 13.1 13.6 13.7 13.9 13.9 13.9 14.2 14.2 14.3 14.4 14.6 14.6 14.9 14.9 15.1
## [31] 15.6 15.7 16.0 17.7 17.7 17.8 18.7 18.7 19.6 20.0 20.1 20.2 20.7 20.9 21.0
## [46] 21.1
```

---

![](grammar_graphics_slides_files/figure-html/unnamed-chunk-12-1.png)&lt;!-- --&gt;

--

![](grammar_graphics_slides_files/figure-html/unnamed-chunk-13-1.png)&lt;!-- --&gt;


---

![](grammar_graphics_slides_files/figure-html/unnamed-chunk-14-1.png)&lt;!-- --&gt;
---

![](grammar_graphics_slides_files/figure-html/unnamed-chunk-15-1.png)&lt;!-- --&gt;

---

![](grammar_graphics_slides_files/figure-html/unnamed-chunk-16-1.png)&lt;!-- --&gt;

---

![](grammar_graphics_slides_files/figure-html/unnamed-chunk-17-1.png)&lt;!-- --&gt;

---

![](grammar_graphics_slides_files/figure-html/unnamed-chunk-18-1.png)&lt;!-- --&gt;


![](grammar_graphics_slides_files/figure-html/unnamed-chunk-19-1.png)&lt;!-- --&gt;


---

![](grammar_graphics_slides_files/figure-html/unnamed-chunk-20-1.png)&lt;!-- --&gt;

---

![](grammar_graphics_slides_files/figure-html/unnamed-chunk-21-1.png)&lt;!-- --&gt;



![](grammar_graphics_slides_files/figure-html/unnamed-chunk-22-1.png)&lt;!-- --&gt;

---


![](grammar_graphics_slides_files/figure-html/unnamed-chunk-23-1.png)&lt;!-- --&gt;

---


![](grammar_graphics_slides_files/figure-html/unnamed-chunk-24-1.png)&lt;!-- --&gt;

---

# The world is your oyster


![](grammar_graphics_slides_files/figure-html/unnamed-chunk-25-1.png)&lt;!-- --&gt;

![](grammar_graphics_slides_files/figure-html/unnamed-chunk-26-1.png)&lt;!-- --&gt;

---

# Ok, that wasn't super compelling...


```
## # A tibble: 53,940 × 10
##    carat cut       color clarity depth table price     x     y     z
##    &lt;dbl&gt; &lt;ord&gt;     &lt;ord&gt; &lt;ord&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1  0.23 Ideal     E     SI2      61.5    55   326  3.95  3.98  2.43
##  2  0.21 Premium   E     SI1      59.8    61   326  3.89  3.84  2.31
##  3  0.23 Good      E     VS1      56.9    65   327  4.05  4.07  2.31
##  4  0.29 Premium   I     VS2      62.4    58   334  4.2   4.23  2.63
##  5  0.31 Good      J     SI2      63.3    58   335  4.34  4.35  2.75
##  6  0.24 Very Good J     VVS2     62.8    57   336  3.94  3.96  2.48
##  7  0.24 Very Good I     VVS1     62.3    57   336  3.95  3.98  2.47
##  8  0.26 Very Good H     SI1      61.9    55   337  4.07  4.11  2.53
##  9  0.22 Fair      E     VS2      65.1    61   337  3.87  3.78  2.49
## 10  0.23 Very Good H     VS1      59.4    61   338  4     4.05  2.39
## # … with 53,930 more rows
```

---


![](grammar_graphics_slides_files/figure-html/unnamed-chunk-28-1.png)&lt;!-- --&gt;

![](grammar_graphics_slides_files/figure-html/unnamed-chunk-29-1.png)&lt;!-- --&gt;

---



![](grammar_graphics_slides_files/figure-html/unnamed-chunk-30-1.png)&lt;!-- --&gt;

![](grammar_graphics_slides_files/figure-html/unnamed-chunk-31-1.png)&lt;!-- --&gt;

---

![](grammar_graphics_slides_files/figure-html/unnamed-chunk-32-1.png)&lt;!-- --&gt;


![](grammar_graphics_slides_files/figure-html/unnamed-chunk-33-1.png)&lt;!-- --&gt;


---

# Onto scatterplots!

![](grammar_graphics_slides_files/figure-html/unnamed-chunk-34-1.png)&lt;!-- --&gt;

---

![](grammar_graphics_slides_files/figure-html/unnamed-chunk-35-1.png)&lt;!-- --&gt;


---



![](grammar_graphics_slides_files/figure-html/unnamed-chunk-36-1.png)&lt;!-- --&gt;


---


![](grammar_graphics_slides_files/figure-html/unnamed-chunk-37-1.png)&lt;!-- --&gt;

---

![](grammar_graphics_slides_files/figure-html/unnamed-chunk-38-1.png)&lt;!-- --&gt;

---

![](grammar_graphics_slides_files/figure-html/unnamed-chunk-39-1.png)&lt;!-- --&gt;

---


![](grammar_graphics_slides_files/figure-html/unnamed-chunk-40-1.png)&lt;!-- --&gt;

---


# Do the axes look at all "strange" to you?


.pull-left[
![](grammar_graphics_slides_files/figure-html/unnamed-chunk-41-1.png)&lt;!-- --&gt;
]

--

.pull-right[
![](grammar_graphics_slides_files/figure-html/unnamed-chunk-42-1.png)&lt;!-- --&gt;
]

---
class: center

# Use log scales for data with extreme ranges

![](grammar_graphics_slides_files/figure-html/unnamed-chunk-43-1.png)&lt;!-- --&gt;

---

# Let's practice

&lt;br&gt;&lt;br&gt;

+ _Always start with axes_:
  + What variable is on the X-axis? What *type* of data is it?
&lt; br&gt;&lt;br&gt;
  + What variable is on the Y-axis? What *type* of data is it?
  &lt;br&gt;&lt;br&gt;
+ Are there colors or fills? Are they "just colors" or are they *aesthetics*?
&lt;br&gt;&lt;br&gt;
+ What are the geometries in the plot?
&lt;br&gt;&lt;br&gt;
+ What *interpretations* can we make about the plot? What question(s) does the plot address or not address? (there are MANY right answers here!). 
&lt;br&gt;&lt;br&gt;
+ What might the underlying dataset actually look like? *What variables (columns) are likely present?*
&lt;br&gt;&lt;br&gt;
&lt;br&gt;&lt;br&gt;
All figures in the following slides are from [Fundamentals of Data Visualization](https://clauswilke.com/dataviz/).


---


# Butterfat from different cows


&lt;img src="img/gg/butterfat-densitites-1.png" width="600px" /&gt;


Density estimates of the butterfat percentage in the milk of four cattle breeds. Data Source: Canadian Record of Performance for Purebred Dairy Cattle.

---


# Butterfat from different cows, as bars


&lt;img src="img/gg/butterfat-bars-1.png" width="600px" /&gt;

---

# Let's compare:


&lt;img src="img/gg/butterfat-densitites-1.png" width="400px" /&gt;


&lt;img src="img/gg/butterfat-bars-1.png" width="400px" /&gt;

---

# Average daily temperatures

&lt;img src="img/gg/temp-normals-vs-time-1.png" width="600px" /&gt;

Daily temperature normals for four selected locations in the U.S. Temperature is mapped to the y axis, day of the year to the x axis, and location to line color. Data source: NOAA.

---


# Temperatures in Lincoln, NE in 2016

&lt;img src="img/gg/lincoln-temp-boxplots-1.png" width="600px" /&gt;

---


# Temperatures in Lincoln, NE in 2016

&lt;img src="img/gg/lincoln-temp-boxplots-1.png" width="350px" /&gt;
&lt;img src="img/gg/lincoln-temp-violins-1.png" width="450px" /&gt;


---

# Temperatures in Lincoln, NE in 2016

&lt;img src="img/gg/lincoln-temp-boxplots-1.png" width="300px" /&gt;
&lt;img src="img/gg/lincoln-temp-violins-1.png" width="300px" /&gt;
&lt;img src="img/gg/lincoln-temp-all-points-1.png" width="450px" /&gt;

---

# Temperatures in Lincoln, NE in 2016

&lt;img src="img/gg/lincoln-temp-boxplots-1.png" width="300px" /&gt;
&lt;img src="img/gg/lincoln-temp-violins-1.png" width="300px" /&gt;
&lt;img src="img/gg/lincoln-temp-jittered-1.png" width="450px" /&gt;

---

# Box office income

&lt;img src="img/gg/boxoffice-vertical-1.png" width="700px" /&gt;

Highest grossing movies for the weekend of December 22-24, 2017. Data source: Box Office Mojo.

---

# Box office income - what's different?

&lt;img src="img/gg/boxoffice-horizontal-1.png" width="600px" /&gt;

---


# Median household income

&lt;img src="img/gg/income-by-age-race-dodged-1.png" width="650px" /&gt;

2016 median U.S. annual household income versus age group and race. For each age group there are four bars, corresponding to the median income of Asian, white, Hispanic, and black people, respectively. Data source: United States Census Bureau.



---

# Bluejays

&lt;img src="img/gg/blue-jays-scatter-sex-1.png" width="550px" /&gt;

Head length versus body mass for 123 blue jays. The birds’ sex is indicated by color. Data source: Keith Tarvin, Oberlin College.

---


# Bluejays, redux 1

&lt;img src="img/gg/blue-jays-scatter-bubbles-1.png" width="700px" /&gt;

---


# Bluejays, redux 2

&lt;img src="img/gg/blue-jays-scatter-line-1.png" width="550px" /&gt;


---

# Male bluejays only


&lt;img src="img/gg/blue-jays-male-conf-band-1.png" width="550px" /&gt;

---

# Getting an intuition for the _confidence interval_


&lt;img src="img/gg/blue-jays-male-fitted-draws-1.png" width="550px" /&gt;

---



# Airplane delays


&lt;img src="img/gg/arrival-delay-vs-distance-1-bad.png" width="475px" /&gt;


Mean arrival delay versus distance from New York City. Data source: U.S. Dept. of Transportation, Bureau of Transportation Statistics. 

--

This figure is labeled as “bad” because it is overly complex. Most readers will find it confusing and will not intuitively grasp what it is the figure is showing.

--

**"Looking cool/smart" is NOT the same as effectively communicating.** We'll talk more about data viz style and best practices after we start learning how to plot in R next week!
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "rainbow",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
