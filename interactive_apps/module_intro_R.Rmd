---
title: "Introduction to R"
author: "Data Science for Biologists, Spring 2021"
output: 
  learnr::tutorial:
    progressive: true
    allow_skip: true
    theme: united
    css: css/custom-css.css
runtime: shiny_prerendered
---
  
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(learnr)
library(ggplot2) ## for msleep dataset
tutorial_options(exercise.lines = 6)
```


<br><br>
  
#### **See [here](https://sjspielman.github.io/datascience_for_biologists/tutorials/introduction_to_R.html) for the "Introduction to R tutorial"**
  
## Set 1: Using R as a calculator

<br>

1. What is 5 times 6?

> Hint:  Use the asterisk `*` to multiply numbers

```{r calc_q1, exercise =TRUE}

```

```{r calc_q1-solution}
5*6
```

<br>
  
2. What is 600 divided by 2.53?

> Hint:  Use the forward slash `/` to divide numbers

```{r calc_q2, exercise = TRUE}

```

```{r calc_q2-solution}
600/2.53
```
<br>

3. What is 138 squared?

> Hint:  Use the carot symbol `^` *or* two asterisks (`**`) to raise numbers to an exponent.

```{r calc_q3, exercise = TRUE}

```
```{r calc_q3-solution, collapse=TRUE}
138**2 

#Equally valid approach
138^2 
```
<br>

4. What is the square root of 14?

> Hint:  Square roots are like raising to the power of 0.5

```{r calc_q4, exercise = TRUE}

``` 
```{r calc_q4-solution}
14^0.5
```

5. What is the answer to: 11 plus 10, all divided by 3?
  
  > Hint: You'll need parentheses do this math correctly - remember your PEMDAS!

```{r calc_q5, exercise = TRUE}

``` 

```{r calc_q5-solution}
(11+10)/3
```

<br>



## Set 2: Working with variables 

<br>

### Identifying variable components

<br><br>
  
1. The code example below defines a variable. Answer the multiple choice questions about this code:
  ```{r}
y <- 8.5
```

```{r quiz1, echo=FALSE}
quiz(caption = "Multiple Choice",
     question("What is the *name* of this variable?",
              answer("`<-`", message = "This is the assignment operator."),
              answer("y", correct = TRUE),
              answer("8.5"),
              answer("We can't tell."),
              allow_retry = TRUE
     ),
     question("What is the *value* of this variable?",
              answer("`<-`",  message = "This is the assignment operator."),
              answer("y"),
              answer("8.5", correct = TRUE),
              answer("We can't tell."),
              allow_retry = TRUE
     ),
     question("What is the *type* of this variable?",
              answer("Character"),
              answer("Numeric", correct = TRUE),
              answer("Logical"),
              answer("We can't tell."),
              allow_retry = TRUE
     )
)
```



2. The code example below defines a variable. Answer the multiple choice questions about this code:
  ```{r}
favorite_critter <- "tardigrade"
```

```{r quiz2, echo=FALSE}
quiz(caption = "Multiple Choice",
     question("What is the *name* of this variable?",
              answer('"tardigrade"'),
              answer("`<-`", message = "This is the assignment operator."),
              answer("favorite_critter", correct = TRUE),
              answer("We can't tell."),
              allow_retry = TRUE
     ),
     question("What is the *value* of this variable?",
              answer('"tardigrade"', correct = TRUE),
              answer("`<-`", message = "This is the assignment operator."),
              answer("favorite_critter"),
              answer("We can't tell."),
              allow_retry = TRUE
     ),
     question("What is the *type* of this variable?",
              answer("Character", correct = TRUE),
              answer("Numeric"),
              answer("Logical"),
              answer("We can't tell."),
              allow_retry = TRUE
     )
)
```

### Before you continue, an important message!
  
After you define a variable, **always** print out the variable to make sure it was defined correctly! In these exercises, you can reveal the value of a variable simply by typing and running the variable's name. Try it out below! First, run the code "as is" - this will define y as equal to 8.5 internally, but it won't do anything else! Then, type y directly to print its output:
  
```{r demo_print, exercise=TRUE}
## Gives no output on its own, but does something *internally*. 
y <- 8.5 

## Next, type y below and re-run this code chunk. The value 8.5 will be printed out
```

**Remember that the computer is this annoying person (AP):**

You: "Can you calculate 5 times 2 for me?"

AP: "Sure I can do that!"

You: "..."

AP: "..."

You: "Ugh, can you TELL ME what 5 times 2 is?"

AP: "It's 10"

You: "Well why didn't you just tell me the first time?!"

AP: "You didn't ask me to TELL you 5 times 2. You just asked me to CALCULATE 5 times 2."


### Defining and using variables


<br>
  
1. Define a variable named `banana_price` whose value is 0.55 (aka 55 cents). 

> Hint:  Use the assignment operator `<-` to assign the value 0.55 to the variable name `banana_price`.

```{r variables_q1, exercise = TRUE}

```
```{r variables_q1-solution}
banana_price <- 0.55
```
<br>


2. Again, define the `banana_price` variable (since these questions don't communicate with each other!!). Use R as a calculator to determine the cost of 17 bananas. Perform this operation using the `banana_price` variable itself.


```{r variables_q2, exercise = TRUE}

```
```{r variables_q2-solution}
banana_price <- 0.55
banana_price * 17
```
<br>

3. Modify your code to the previous question by creating a second variable called `num_bananas`. Assign this variable the value 17, and recalculate your answer using only the variables `banana_price` and `num_bananas`.

```{r variables_q3, exercise = TRUE}

```
```{r variables_q3-solution}
banana_price <- 0.55
num_bananas <- 17
banana_price * num_bananas
```
<br>
  
4. Again modify the code to change the banana price to 62 cents (0.62) and re-calculate the cost of buying 17 bananas.

```{r variables_q4, exercise = TRUE}

```
```{r variables_q4-solution}
banana_price <- 0.62
num_bananas <- 17
banana_price * num_bananas
```
<br>


5. You're sick of bananas - time to buy some [persimmons](https://en.wikipedia.org/wiki/Persimmon). These are more expensive at \$2.75 a piece. You want to buy 10 persimmons. How much will it cost you?
                                                  
  > Again, perform all calculations with variables. This math is easy enough to do in your head, but you must use code!! 
                                                  
```{r variables_q5, exercise = TRUE}

```
```{r variables_q5-solution}
persimmon_price <- 2.75
num_persimmons <- 10
persimmon_price * num_persimmons
```
<br>

6. Modify your previous code to *save* the calculations to a new variable, `total_cost`. Print out this variable to be sure it's correct.

```{r variables_q6, exercise = TRUE}

```
```{r variables_q6-solution}
persimmon_price <- 2.75
num_persimmons <- 10
total_cost <- persimmon_price * num_persimmons
total_cost
```
<br>

7. Define a variable called `my_favorite_fruit`, and give it the value of...your favorite fruit! This is a *string* variable, so you must enclose the assigned value in quotes. Print your variable to make sure it is correct.

> You are allowed to not have a favorite fruit, in which case please use `my_favorite_food` :).
> 
> The goal of this question is to practice defining a STRING variable. No math!

```{r variables_q7, exercise = TRUE}

```
```{r variables_q7-solution}
my_favorite_fruit <- "papaya"
my_favorite_fruit
```

<br>


## Set 3: Working with functions

<br>

1. Use the function `sqrt()` to calculate the square root of 206.
  
> Hint: Provide 206 as an *argument* to the function `sqrt()`

```{r func_q1, exercise = TRUE}

```
```{r func_q1-solution}
sqrt(206)
```

<br>

2. Use the function `log()` to calculate the *natural log* (this is actually the default behavior of this function) of 206.
  
```{r func_q2, exercise = TRUE}

```
```{r func_q2-solution}
log(206)
```

<br>

3. Looking up documentation for how to use functions in R (and other languages!) is *very important* - don't try to be a psychic!! To see the documentation for a function, type `?nameoffunction`. To see this in action, run the code below. Have a particular look at the sections "Usage" and "Arguments." Then, use the function `log()` to calculate the log in base 10 of 206.

> Hint: The function `log()` can optionally take a *second* argument specifying the base. For example, `log(500, 6)` takes the log of 500 in base 6. Make sure you see where this information is described in the `?log` output!

> Note: Sometimes these official help pages are written really poorly. Over time, you'll become more comfortable with them! For now, focus on sections "Usage" and "Arguments."
 
```{r func_q3, exercise = TRUE}
?log()

``` 

```{r func_q3-solution}
log(206, 10)
```
<br>

4. The function `class()` will tell you what *type* of data a given variable or value is. Use this function to determine the *type* of value 7.

> Hint: Provide 7 as the argument to `class()`

  
```{r func_q4, exercise = TRUE}

``` 
```{r func_q4-solution}
class(7)
```

<br>

5. Now, use `class()` to determine the *type* of value `"7"`.
  
> Hint: Don't forget the quotes! Think: what did you learn from the last two questions about how quotes work?

```{r func_q5, exercise = TRUE}

```   
```{r func_q5-solution}
class("7")
```



## Set 4: Working with arrays

<br>

##### Note: The terms "array" and "vector" both refer to the same thing and are used interchangeably, but a "list" is something else entirely! These exercises don't consider lists at all.


<br>

1. Define an array variable called `array_numbers` that contains the values 1, 2, 3, 4, and 5. Then, print the variable itself to make sure its contents look right.

> Hint: Use the function `c()` ("combine") to define your array. In the template below, I provide code to make (but not save!) a small array with values 8, 9, and 10. Engage with this code and then adapt it to the question.

> Hint 2: Spaces do NOT matter! For example, `c(8,9,10)` and `c(8, 9,   10)` are equivalent.

 
```{r array_q1, exercise = TRUE}
c(8, 9, 10)
```         

```{r array_q1-solution}
array_numbers <- c(1, 2, 3, 4, 5)
array_numbers
```
<br>

2. Define an array variable called `array_numbers2` that again contains the values 1, 2, 3, 4, and 5, **but!** this time use a colon `:` instead of `c()`. Again, type the variable name itself to make sure its contents look right.
     
> Hint: In the template below, I provide code to make (but not save!) an array using the colon instead of the `c()` function. The array contains value 5,6,7 in order. Engage with this code and then adapt it to the question.

        
```{r array_q2, exercise = TRUE}
5:7
``` 
```{r array_q2-solution}
array_numbers2 <- 1:5
array_numbers2
```

<br>


3. Define an array variable called `even_numbers` that contains the values 2, 4, 6, 8, and 10 using the `c()` function.

> The colon will not work here. The colon can only define an array with whole numbers in exact order.
  
```{r array_q3, exercise = TRUE}

``` 
```{r array_q3-solution}
even_numbers <- c(2,4,6,8,10)
even_numbers
```


<br>

4. The function `length()` tells you how many items are in a given array. This function is analogous to the `nchar()` function we previously learned: Just like we use `nchar()` to ask how long a string is, we use `length()` to ask how long an array is. 

Define an array with 5 numbers of your choosing (be brave!!), and use the function `length()` to determine how many values it contains.

> Hint: First make sure (print print print!) that you are defining your array correctly. *Only once* you can see that the array is correct should you calculate its length. **Write your code one line at a time for success!!**

> Hint 2: If you did the question correctly, the length should be 5!

```{r array_q4, exercise = TRUE}

```   
```{r array_q4-solution}
some_numbers <- c(10, 11, 2, 19, 6)
length(some_numbers)
```

5. One place where R really shines is *vectorization* - it can perform an operation on *all items in a vector* at the same time! The code below multiplies every value in the array `example_array` by 5. Engage with and understand this code, and then modify the the code to instead divide every item in the array by 10.

> Hint: When modifying the code be careful not to delete the definition of `example_array`.

  
```{r array_q7, exercise = TRUE}
example_array <- c(5, 78, -3, 11, 6, 0)
example_array * 5
```     
```{r array_q7-solution}
example_array <- c(5, 78, -3, 11, 6, 0)
example_array / 10
```

<br>


## Set 5: Working with logical statements

<br><br>
  
**All exercises below should use one (or more!) logical operator(s) to give an answer of `TRUE` or `FALSE`.**

<br>

#### Logical operators:

| Symbol | Asks if... | 
|:--------|:------------|
|`==`    | Two values are equal |
|`!=`    | Two values are *not* equal |
| `>`    | LHS (left-hand side) is greater than RHS (right-hand side) |
| `>=`   | LHS is greater than or equal to RHS | 
| `<`    | LHS is less than RHS  |
| `<=`   | LHS is less than or equal to RHS | 
| `&`    | Used to combine logical statements and ask if **BOTH** are `TRUE`

<!--
  | `|`    | Used to combine logical statements and ask if **AT LEAST ONE** is `TRUE`. Type this symbol with `Shift`+`\`.
--> 
<br>

### Set 5.1: Basic logical operations

1. Is 56 greater than 7?

```{r logical_q1, exercise = TRUE}

``` 

```{r logical_q1-solution}
56 > 7
```
<br>

2. Is 110 is equal to 12?

> Hint:  When comparing *equality* of numbers, you MUST use two equals!! `==`

```{r logical_q2, exercise = TRUE}

```

```{r logical_q2-solution}
110 == 12
```
<br>

3. Is 32 *less than or equal to* 88?

```{r logical_q3, exercise = TRUE}

```

```{r logical_q3-solution}
32 <= 88
```
<br>

4. Is 100 equal to -10 squared?
  
  > Hint: Remember your PEMDAS and don't forget to use parentheses!! Otherwise, your answer will not be right.
  
```{r logical_q4, exercise = TRUE}

```
```{r logical_q4-solution}
100 == (-10)^2
```
<br>

5. Is 100 *not equal* to -55?
  
> Hint: Check if values are *not equal* with the logical operator `!=`. Generally speaking, exclamation marks mean "not."

```{r logical_q5, exercise = TRUE}

```

```{r logical_q5-solution}
100 != -55
```
<br>

6. Is 75 greater than 75?
 
```{r logical_q6, exercise = TRUE}

```
```{r logical_q6-solution}
75 > 75
```
<br>

7. Is 12 raised to the 4th power (remember your exponent symbol!) less than 13 raised to the 3rd power?

```{r logical_q7, exercise = TRUE}

```
```{r logical_q7-solution}
12^4 < 13^3
```
<br>

### Set 5.2: Compound logical statements

<br>

1. In all previous questions in this section, you wrote *single logical statements* - you used a logical operator to evaluate if a single statement was `TRUE` or `FALSE`. 


This time, write a *compound logical statement* to ask if: 100 is equal to 100 *and* 66 is equal to 66. 

Statements with "and" will only evaluate as `TRUE` if BOTH conditions are `TRUE`. Simply use an ampersand `&` to combine logical statements. To get you started, there is an example below you can run to explore this new concepts, and then adapt to answer the current question.

```{r compound_logical_q1, exercise = TRUE}
# This example code asks: is 1 equal to 1 and 2 equal to 2?
1 == 1 & 2 == 2
# This is equivalent, but the parentheses are your choice!
(1 == 1) & (2 == 2)

```
```{r compound_logical_q1-solution}
100 == 100 & 66 == 66
```
<br>

#### A side message!

Printing multiple things can be confusing - which line of code printed what value? In above circumstance, there are only two results printed, and two lines of code, so it's easy to see, but this won't last for long! Use `print()` statements to help guide you, as in:
```{r compound_logical-ex, exercise = TRUE}
print("first comparison: 1==1")
1 == 1
print("second comparison: 2!=2")
2 != 2
```

<br>

2. Is 100 greater than 87 *and* is 66 less than 12?
  
```{r compound_logical_q2, exercise = TRUE}

```
```{r compound_logical_q2-solution}
100 > 87  & 66 < 12
```
<br>

3. Is 100 greater than 50 *and* is 100 less than 150?
  
> Hint: Even though we might say out loud, "Is 100 greater than 50 and less than 150?", we need to _write the code_ much more explicitly as: is 100 greater than 50 AND is 100 less than 150? We must write the two comparisons to 100 separately.

```{r compound_logical_q3, exercise = TRUE}

```
```{r compound_logical_q3-solution}
100 > 50  & 100 < 150
```
<br>


4. Is 50 greater than or equal 35, and is 60 equal to -20?
```{r compound_logical_q4, exercise = TRUE}

```

```{r compound_logical_q4-solution}
50 >= 35 & 60 == -20
```

<br>


### Set 5.3: Working with variables and logical statements

<br>

For this section, you will perform logical comparisons on _variables_ rather than directly on values. The goal of this activity is to get you into the habit of working preferentially with variables that stand in for values. This strategy makes your code cleaner and easier to work with.

The first example is templated for you. **Remember: Variables should always start with a letter can should only contain letters, numbers, and underscores.**


1. Is 12 greater than -4? **Again, this is templated for you. Engage with and run this code to understand what it's doing.**
  
```{r logical_q11, exercise = TRUE, exercise.lines = 8}
# First we define variables
value1 <- 12
value2 <- -4

# Then we compare variables INSTEAD OF comparing values 12 and -4
value1 > value2
``` 

<br>

2. Is 7 is equal to 5.44?


```{r logical_q12, exercise = TRUE}

```

```{r logical_q12-solution}
value1 <- 7
value2 <- 5.44

value1 == value2
```
<br>

3. Is 18 greater than 5 *and* is 11 less than 100?

> Hint: You need to define four variables here!

```{r logical_q13, exercise = TRUE}

```

```{r logical_q13-solution}
comp1_val1 <- 18
comp2_val2 <- 5

comp2_val1 <- 11
comp2_val2 <- 100

comp1_val1 > comp1_val2 & comp2_val1 < comp2_val2
```
<br>


### Set 5.4: Logical statements and functions


In this section, you will continue practicing logical operations (asking if something is `TRUE` or `FALSE`) incorporating functions into your code. **The first question is templated for you.**

1. Is the square root of 25 equal to 5? **Run and engage with this code as practice!**

```{r logical_fxn_1, exercise=TRUE}
sqrt(25) == 5

# Or with improved coding style:
value1 <- sqrt(25)
value2 <- 5
value1 == value2
```
<br>

2. The function `nchar()` asks how many characters are in a string (how long is a string?). See this function in action below. **Again, run and engage with this code below as practice!**

```{r practice_nchar, exercise=TRUE, exercise.lines = 10}
nchar("hello")

hello_phrase <- "hi there!" # there are 9 characters in this string including space and !
# Note that the answer is 9 and NOT 12 (the number of characters in the variable)
nchar(hello_phrase)

# Does the number of characters equal 10? Nope!
nchar(hello_phrase) ==  10
```

Now, use this function as part of your code to answer: Does the string "blazing" have the same number of characters as "saddles"?

> Hint: You want to compare `nchar("blazing")` to `nchar("saddles")` using a logical operator that asks if two things are equal: `==`. 
>
> Hint 2: Your code should print `TRUE` if done correctly (they both have 7 letters).
>
> Hint 3: Not a hint, but a suggestion to definitely watch this movie if you've never seen it.

```{r logical_fxn_2, exercise=TRUE}

```
```{r logical_fxn_2-solution}
nchar("blazing") == nchar("saddles")

# Or with improved coding style:
nchar_blazing <- nchar("blazing")
nchar_saddles <- nchar("saddles")
nchar_blazing == nchar_saddles

# This is also a nice way to code it:
blazing_str<- "blazing"
saddles_str <- "saddles"
nchar(blazing_str) == nchar(saddles_str)
```
<br> 

3. Assign the string value "data science" to a variable called `string1`, and assign the value "for biologists" to a variable called `string2`. Then, ask whether the number of characters in `string1` is *greater than or equal to* the number of characters in `string2`.

> Hint: This is very similar to the previous question, except you _must_ define variables, and you need to use a different logical operator.

```{r logical_fxn_3, exercise=TRUE}

```
```{r logical_fxn_3-solution}
string1 <- "data science"
string2 <- "for biologists"
nchar(string1) >= nchar(string2)
```
<br>

  
  
4. Is the natural log of 10 less than the natural log of 100 *and* is the natural log of 10 equal to 1.5?
  
  > Hint: the `log()` function calculates the natural log by default.
  >
  > Hint 2: Don't forget to use `&` for multiple comparisons!

```{r logical_fxn_4, exercise = TRUE}

```
```{r logical_fxn_4-solution}
log(10) < log(100) & log(10) == 1.5

# Or, with variables:
value1 <- log(10)
value2 <- log(100)
value3 <- 1.5
value1 < value2 & value1 == value3
```
<br>



### Set 5.5: Logical operators and arrays

1. The code below defines an array. Use the function `length()` to determine the length of the array, *and then ask* using a logical operator if the length equal 5. If done correctly, your answer should be `FALSE`.


```{r array_q5, exercise = TRUE}
multiples_of_11 <- c(11, 22, 33, 44, 55, 66)
```   
```{r array_q5-solution}
multiples_of_11 <- c(11, 22, 33, 44, 55, 66)
length(multiples_of_11) == 5
```

2. Create an array yourself that contains with *FOUR* values, but this time make sure all the values are *strings* (each value should be surrounded by quotes). Similar to the previous question, use the function `length()` to ask how long the array is. *Then*, ask if the length of the array is equal to 4.

> Hint: Even though each string in the array has multiple characters, each string comprises only one value in the overall array.
>
> Hint 2: The output for your logical comparison should be `TRUE` if done correctly.

```{r array_q6, exercise = TRUE}

```   
```{r array_q6-solution}
my_favorite_things <- c("raindrops on roses", "whiskers on kittens", "bright copper kettles", "warm_woolen_mittens")
length(my_favorite_things)
length(my_favorite_things) == 4
```

<br>
  
  
3. We can also perform logical operations in a vectorized context. The code below asks if all values in `example_array` are greater than 0. Engage with and understand this code, and then modify the the code to instead ask if every item is **equal to 0** (again, be careful not to delete the `example_array` definition when modifying!).

> Note: This type of output would be referred to as a *logical array* - it is an array of `TRUE` or `FALSE` values.


```{r array_q8, exercise = TRUE}
example_array <- c(5, 78, -3, 1, 6, 0)
example_array > 0
``` 
```{r array_q8-solution}
example_array <- c(5, 78, -3, 1, 6, 0)
# All are FALSE except the last entry 
example_array == 0
```
<br>
<br>
  


### Set 5.6: Arrays and the new logical operator `%in%`

<br>

One of the most POWERFUL logical operators is `%in%` - it's literally the word `in` enclosed by `%`. You can use it to ask if a given value is present *in* an array. 

Here is an example of this logical operator in action:

> Notice how **helpful** it is that I added the extra print statements so you know for sure what is being printed when!

```{r in_example, exercise=TRUE, exercise.lines = 20}
# Define array
rainbow <- c("red", "orange", "yellow", "green", "blue", "indigo", "violet")

# Will return TRUE
print("Is 'red' in the rainbow array?")
"red" %in% rainbow

# Will return FALSE
print("Is 'black' in the rainbow array?")
"black" %in% rainbow

# This is _not_ The Way 
# It asks: Is each value in rainbow equal to "red"?
# This code technically works, but is not at all the same as using %in%
print("Does 'red' equal the whole rainbow array?")
"red" == rainbow
```

<br>


1. The code below defines an array of different animals. Use the `%in%` operator to ask three separate logical questions:
  
  + Is "goat" in this array? 
  + Is "marmoset" in this array?
  + Is "GOAT" in this array? *What does the answer to this code tell you about the importance of letter case??*
  
  > Hint: Case (capital and lowercase letters) matters. "goat" and "GOAT" are totally different.

```{r array_logic_q1, exercise = TRUE}
animals <- c("goat", "turtle", "axolotl", "hyena", "coral")
```  

```{r array_logic_q1-solution}
animals <- c("goat", "turtle", "axolotl", "hyena", "coral")
"goat" %in% animals
"marmoset" %in% animals
"GOAT" %in% animals
``` 
<br>

2. Define an array with all values 50-500 using the colon `:`. Then, use the `%in%` operator to ask if the value -25 is in this array. 

```{r array_logic_q2, exercise = TRUE}

```  
```{r array_logic_q2-solution}
many_numbers <- 50:500 
-25 %in% many_numbers
```  
<br>


3. Consider the array defined below. Is the capital letter "W" in the array? *When answering this question*, SAVE the output from your comparison as a variable, and print that variable to see the answer.

> Hint: Don't forget to write "W" with quotes! We are literally asking about the letter "W", not a variable `W`.

```{r array_logic_q3, exercise = TRUE}
misc_letters <- c("F", "Z", "U", "t", "g", "b", "R", "O", "i", "P", "e", "o", "I", "q", "M", "N", "D", "m", "y", "s")
```  
```{r array_logic_q3-solution}
is_W_there <- "W" %in% misc_letters
is_W_there
```  
<br>





## Set 6: Conditional variable definition

This section will teach you how to use the `ifelse()` function. It allows you to define a variable *based on a certain logical statement* (thing that is `TRUE` or `FALSE`). Here's the anatomy of the function, which takes *three* arguments:

`ifelse(<logical statement>, <value if the statement is TRUE>, <value if the statement is FALSE>)`

Here is an interactive example for you to engage with:

```{r ifelse_example, exercise=TRUE, exercise.lines = 15}
# Evaluates to "greater", since the statement is TRUE
print("example 1")
ifelse(10 > 5, "greater", "less than")

# Evaluates to "crocodile", since the statement is FALSE
print("example 2")
ifelse(10 == 12, "aligator", "crocodile")

# Save it to a variable!
print("example 3")
beast <- ifelse(10 == 12, "aligator", "crocodile")
print(beast)
```
<br>

Practice using the `ifelse()` function to define several variables as follows...


1. Define a variable based on whether 5 is greater than 20. If the condition is `TRUE`, the variable value should be "yup". If the condition is `FALSE`, the variable value should be "nope".

```{r ifelse_1, exercise=TRUE}

```
```{r ifelse_1-solution}
var <- ifelse(5 > 20, "yup", "nope")
# Always *look at* your variable to make sure it worked!
var
```
<br>


2. Define a variable based on whether the type of value `11` is is a number (or in R terms, its class is "numeric"). If it is a number, the variable value should be "number". If is it not a number, the variable value should be "not a number".

> Hint: Use the function `class()`! Remember also that `numeric` is not a class, but `"numeric"` (with quotes!) is.


```{r ifelse_2, exercise=TRUE}

```
```{r ifelse_2-solution}
var <- ifelse(class(11) == "numeric", "number", "not a number")
var
```

<br>

3. Define a variable based on whether the type of the value `"11"` (it has quotes!) is a number. If it is a number, the variable value should be "number". If is it not a number, the variable value should be "not a number".

```{r ifelse_3, exercise=TRUE}

```
```{r ifelse_3-solution}
var <- ifelse(class("11") == "numeric", "number", "not a number")
var
```


<br>

4. Define a variable based on whether the number of characters in the string "rumbledyhump" (defined for you) is equal to 200. If the condition is `TRUE`, the variable value should be 100. If the condition is `FALSE`, the variable value should be 10.

```{r ifelse_4, exercise=TRUE}
my_string <- "rumbledyhump"
```
```{r ifelse_4-solution}
my_string <- "rumbledyhump"
var <- ifelse(nchar(my_string) == 200, 100, 10)
var
```
<br>

5. Define a variable based on whether 6 squared is 36. If this condition is `TRUE`, the variable value should be 4. If this is `FALSE`, the variable value should be 25.

```{r ifelse_5, exercise=TRUE}

```
```{r ifelse_5-solution}
var <- ifelse(6**2 == 36, 4, 25)
var
```
<br>



## Set 7: Data frames


### Exploring data frames

This set of exercises will use a *data frame* (aka *tibble*- we will learn the distinction between these terms!) called `msleep`, which has been pre-loaded for you. This dataset contains information about some species of mammals as follows:
  
+ `name`: The common name
+ `genus`: The taxonomic genus
+ `vore`: Dietary strategy (carnivore, omnivore or herbivore)
+ `order`: The taxonomic order
+ `conservation`: The species' conservation status
  + `cd` --> conservation-dependent
  + `en` --> endangered
  + `lc` --> least concern
  + `nt` --> near-threatened
  + `vu` --> vulnerable    
+ `sleep_total`: Total amount of sleep, in hours, the species tends to experience
+ `sleep_rem`: Total amount of REM sleep, in hours, the species tends to experience
+ `sleep_cycle`: Length of sleep cycle, in hours, the species tends to experience
+ `awake`: Amount of time spent awake, in hours, the species tends to experience
+ `brainwt`: Average brain weight, in kilograms, for this species
+ `bodywt`: Average body weight, in kilograms, for this species


First, in the code chunk below, examine the data frame using functions `head()`, `nrow()`, `ncol()`, and `str()`. **Use the results you achieve from the code to answer the following multiple choice questions about this data frame.**

```{r examine-msleep, exercise=TRUE}


```
<br>


```{r msleep_quiz, echo=FALSE}
quiz(caption = "`msleep` data frame overview questions",
  question("How many rows are in this data frame?",
         answer("6"),
         answer("83", correct = TRUE),
         answer("11"),
         answer("We can't tell"),
         allow_retry = TRUE
         ),
  question("How many columns are in this data frame?",
           answer("6"),
           answer("83"),
           answer("11", correct = TRUE),
           answer("We can't tell"),
           allow_retry = TRUE
           ),
  question("How many columns in the data frame contain *numeric* values?",
           answer("6", correct = TRUE),
           answer("5"),
           answer("All columns are numeric"),
           answer("No columns are numeric"),
           allow_retry = TRUE
           ),
  question("How many columns in the data frame contain *character* (string) values?",
           answer("6"),
           answer("5", correct = TRUE),
           answer("All columns are numeric"),
           answer("No columns are numeric")
           ),
  question("How many columns in the data frame contain *logical* (`TRUE` or `FALSE`) values?",
           answer("6"),
           answer("5"),
           answer("All columns are logical"),
           answer("No columns are logical", correct = TRUE)
           )
)
```
<br>

### Working with data frame columns

1. Technically, columns in data frames are actually *named arrays*. We can access them to work with directly using a dollar sign `$`. The code below extracts the `name` variable from the data frame. Run and understand this code, and then modify it to extract the `awake` column.

> Hint:  Make sure to *not* use any quotes, i.e. do **not** run `msleep$"name"`


```{r msleep_q1, exercise = TRUE}
msleep$name
``` 

``` {r msleep_q1-solution}
msleep$awake
```
<br>

2. Let's get to everyone's favorite part - statistics! Below shows you how to calculate the *average* (mean!) hours that these mammals are awake for. Try out these other functions to calculate other summary statistics: `median()`, `min()`, `max()`, and `sd()` (standard deviation) on the `awake` column. 

> Hint: Help yourself _clearly understand_ which outputted number is which by printing informative statements!

```{r msleep_q2, exercise = TRUE}
mean(msleep$awake)
``` 


``` {r msleep_q2-solution}
print("Median of awake:")
median(msleep$awake)

print("Minimum of awake:")
min(msleep$awake)

print("Maximum of awake:")
max(msleep$awake)

print("Standard deviation of awake:")
sd(msleep$awake)
```
<br>



3. Using your new skills, calculate the _median_ hours of REM sleep (column `sleep_rem`) these mammals get. The output will not look like you expect - instead of a number, you get the output "NA". To start to understand why, view the full contents of this column (i.e. `msleep$sleep_rem`). You will see some values "NA", meaning there is *missing data*. Missing data is very common - real life science (especially biology!) is tricky, and sometimes we can't gather as much data as we want. 

Whenever R encounters NA's in *summary statistics* functions (`mean()`, `median()`, `sd()`, etc.), it gets scared and won't calculate anything at all :(

```{r msleep_q3, exercise = TRUE}

``` 

``` {r msleep_q3-solution}
median(msleep$sleep_rem)
```
<br>
  
4. So, how do we calculate the median from the question above? We need to change how we use the `median()` function by including the *second argument* `na.rm=TRUE`. This argument tells `median()` to ignore ("rm" for remove) NA's when performing calculations. See this code in action below, and then modify it to calculate the _mean_ of this column instead. 

> Note: `na.rm` is NOT A FUNCTION!!! It is an ARGUMENT we can use with SOME functions, such as `mean()` and `median()`.

```{r msleep_q4, exercise = TRUE}
median(msleep$sleep_rem, na.rm = TRUE)
``` 

``` {r msleep_q4-solution}
mean(msleep$sleep_rem, na.rm = TRUE)
```
<br>


5. The column `vore` is a *character* column - it contains strings rather than numbers. Let's examine this column using the function `unique()`, which returns all unique values in a given array - What are the unique vores in this dataset?
  
  > Hint: Remember, you can always look up how to use a function! Try running `?unique` if you're stuck.


```{r msleep_q5, exercise = TRUE}

``` 
``` {r msleep_q5-solution}
unique(msleep$vore)
```
<br>

6. We can also use the function `table()` to get a _count_ of all unique values in a categorical (or factor) variable. Use `table()` to determine how many of each `vore` category is in the dataset.

> You'll notice that `table()` doesn't even consider NA values. Very kind!

```{r msleep_q6, exercise = TRUE}

``` 
``` {r msleep_q6-solution}
table(msleep$vore)
```
<br>


7. We can use the function `summary()` to summarize arrays, and even entire data frames. Run this function twice: first on the `awake` column and then on `msleep` itself (without indexing any columns), and behold the information!

```{r msleep_q7, exercise = TRUE}

``` 
``` {r msleep_q7-solution}
summary(msleep$awake)
summary(msleep)
```

<br>

#### An important learning moment!

You'll notice in the full `summary()` output for `msleep`, there isn't much useful information for the character columns. You may have expected all the *categories* in these columns to be revealed. In fact, R does not treat character variables this way. To force R to consider a vector specifically as containing *categories*, you need to convert it into a new type of data called **factor**, which is a special type of variable in R for, you guessed it, working with categories. The code below shows how the column `vore` would be summarized when converted to a factor with the function `as.factor()`. 

```{r vore_factor, exercise=TRUE}
# Adding spacing helps to see which function is which and where all the parentheses go
summary(  as.factor(msleep$vore)  )
```


### Combining all your skills

In this section we'll use functions and logical operators to explore and answer questions about the `msleep` dataset.

<br>
  
1. Is the species whose common name is "Arctic fox" represented in the `msleep` dataset? 

> Hint: The common names of mammals are stored in the `name` column.
> Hint 2: Don't forget that you can use the `%in%` operator to ask if a value is in an array!

```{r msleep2_q1, exercise = TRUE}

``` 
``` {r msleep2_q1-solution}
"Arctic fox" %in% msleep$name
```
<br> 

2. Is the *genus* "Ailuropoda" (giant pandas!) represented in the `msleep` dataset?

> Hint: The genera of mammals is stored in the `genus` column. 

```{r msleep2_q2, exercise = TRUE}

``` 
``` {r msleep2_q2-solution}
"Ailuropoda" %in% msleep$genus
```
<br> 

3. How many *unique* number of different mammal orders are in this dataset?

> Hint: You need to FIRST determine the unique values in the `order` column with `unique()`, and then ask what the _length_ of that array is. It is extremely important to do one step at a time and print as you go to make sure you're on the right track!!
>
> Hint 2: The code needs to actually print out the number that answers the question - don't count yourself, ask R to count for you!
  
```{r msleep2_q3, exercise = TRUE}

``` 
``` {r msleep2_q3-solution}
unique_orders <- unique(msleep$order)
length(unique_orders)
```
<br>
  
4. Modify your code from the previous question to ask: Are there more than 20 unique orders in the dataset?
  
  > Hint: You'll need to use a logical operator!

```{r msleep2_q4, exercise = TRUE}

``` 
``` {r msleep2_q4-solution}
unique_orders <- unique(msleep$order)
length(unique_orders) > 20
```
<br>

5. Is the mean number of hours slept (`sleep_total`) greater than 12? 

```{r msleep2_q5, exercise = TRUE}

``` 
``` {r msleep2_q5-solution}
mean(msleep$sleep_total) > 12
```
<br>

6. Is the mean brain weight (`brainwt`) of all mammals equal to 7? 

> Hint: First, calculate the mean to make sure your code works. If your answer is not as expected, you may need to explore the data further to figure out what to do!

```{r msleep2_q6, exercise = TRUE}

``` 
``` {r msleep2_q6-solution}
mean(msleep$brainwt, na.rm = TRUE) == 7
```
<br>

7. On average, do mammals spend more time awake or asleep? To answer this question, compare the means of the `awake` and `sleep_total` columns.


```{r msleep2_q7, exercise = TRUE}

``` 
``` {r msleep2_q7-solution}
# This is TRUE, so mammals are awake on average as much or more time than they are asleep
mean(msleep$awake) >= mean(msleep$sleep_total)
```
<br>

8. Calculate the *median RATIO* of how often mammals are awake vs asleep. 

> Hint: Remember, you can directly work with vectors (columns!) like you would any numbers. Ratios are just divisions.
>
> Hint 2: Take this one step at a time. First, calculate a array. of ratios, and then calculate the median value of that array.

```{r msleep2_q8, exercise = TRUE}

``` 
``` {r msleep2_q8-solution}
ratio <- msleep$awake / msleep$sleep_total
median(ratio)
```
<br>

9. Is the number of rows in this dataset greater than 100?

> Don't forget the nrow() function!
  
  ```{r msleep2_q9, exercise = TRUE}

``` 
``` {r msleep2_q9-solution}
nrow(msleep) > 100
```
<br>
  
10. Does any mammal have a body weight of 33.5? In other words, is the value 33.5 in the `bodywt` column?
  
  
```{r msleep2_q10, exercise = TRUE}

``` 
``` {r msleep2_q10-solution}
33.5 %in% msleep$bodywt
```

11. Is the standard deviation (`sd()`) of body weights greater than or equal to 300?
  
  
```{r msleep2_q11, exercise = TRUE}

``` 
``` {r msleep2_q11-solution}
sd(msleep$bodywt) >= 300
```


12. Which is larger: the smallest value in `sleep_rem` or the smallest value in `awake`? 
  
  > Use the function `min()`, and go one step at a time.
> Remember, you might get NA's! What do you have to tell the `min()` function to deal with this?


```{r msleep2_q12, exercise = TRUE}

``` 
``` {r msleep2_q12-solution}
min_sleep_rem <- min(msleep$sleep_rem, na.rm=TRUE)
min_awake <- min(msleep$awake)

# Answer is TRUE: smallest awake hours is greater than smallest REM hours
min_awake > min_sleep_rem
```



13. Define a variable based on whether "Cheetah" is an animal in `msleep` (use the `name`) column. If the condition is `TRUE`, the variable value should be "present". If the condition is `FALSE`, the variable value should be "absent".

> Hint: You will need to use `ifelse()` and the `%in%` operator!

```{r msleep2_q13, exercise=TRUE}

```
```{r msleep2_q13-solution}
var <- ifelse("Cheetah" %in% msleep$name, "present", "absent")
var
```
<br>

14. Define a variable based on whether the *maximum body weight* in `msleep` is greater than 2000. If the condition is `TRUE`, the variable value should be 1 (the number 1, no quotes!). If the condition is `FALSE`, the variable value should be 0.

```{r msleep2_q14, exercise=TRUE}

```
```{r msleep2_q14-solution}
var <- ifelse(max(msleep$bodywt) > 2000, 1, 0)
var

# Or more spaced out for clarity:
max_bodywt <- max(msleep$bodywt)
var <- ifelse(max_bodywt > 2000, 1, 0)
var
```
<br>


15. Define a variable based on whether number of rows in `msleep` equals 80. If the condition is `TRUE`, the variable value should be 10. If the condition is `FALSE`, the variable value should be -10.


```{r msleep2_q15, exercise=TRUE}

```
```{r msleep2_q15-solution}
var <- ifelse(nrow(msleep) == 80, 10, -10)
var
```
<br>